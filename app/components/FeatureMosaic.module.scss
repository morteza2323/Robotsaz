@use '../styles/variables' as *;
@use '../styles/mixins' as *;

/* پس‌زمینه گرادیانی لطیف + موج بالا */
.wrap {
  position: relative;
  padding: 64px 0;
  background:
    radial-gradient(80% 120% at 50% -10%, rgba($primary,.12), transparent 60%),
    linear-gradient(180deg, $bg 0%, $bg-soft 100%);
  isolation: isolate;

  &::before {
    content: "";
    position: absolute; inset: 0 0 auto 0; height: 18px;
    background: radial-gradient(120% 100% at 50% 100%, transparent 60%, rgba(#000,.04) 61%)
      top/100% 18px no-repeat;
    opacity: .25; pointer-events: none;
  }
}

/* سرسکتشن + افکت خط متحرک زیر هدر */
.head {
  text-align: center; margin-bottom: 22px;

  h2 {
    margin-bottom: 8px; position: relative; display: inline-block;

    &::after {
      content: "";
      position: absolute;
      left: 50%; /* وسط‌چین */
      bottom: -10px;
      width: 140px; height: 3px; border-radius: 999px;
      background: linear-gradient(90deg, rgba($primary,.0), $primary);
      transform: translateX(-50%) scaleX(0);
      transform-origin: right center; /* از راست به چپ باز می‌شود */
      animation: underline 900ms ease forwards 200ms;
    }
  }

  p { margin-top: 16px; }
}

@keyframes underline {
  from { transform: translateX(-50%) scaleX(0); opacity: .2; }
  to   { transform: translateX(-50%) scaleX(1); opacity: 1; }
}

/* گرید نامتقارن با ردیف‌های هم‌ارتفاع */
.grid {
  display: grid;
  gap: 16px;
  grid-template-columns: 1fr;
  grid-auto-rows: 1fr;

  @media (min-width: 992px) {
    grid-template-columns: repeat(2, 1fr);
    grid-auto-rows: 1fr; /* همه ردیف‌ها هم‌ارتفاع */
    grid-template-areas:
      "A B"
      "C D";
  }
}

/* کارت پایه */
.card {
  @include card;
  position: relative;
  overflow: hidden;
  padding: 18px 18px 20px;
  background: $bg;
  transform: translateZ(0);
  transition: transform .2s ease, box-shadow .2s ease;

  /* محتوای هم‌تراز و وسط‌چین عمودی */
  display: flex;
  flex-direction: column;
  justify-content: center;

  h3 { margin: 6px 0 4px; font-size: 18px; }
  p  { color: $muted; font-size: 14px; }

  &:hover { transform: translateY(-4px); box-shadow: 0 10px 26px rgba(15,23,42,.10); }
  &:hover .icon { transform: translateY(-3px) scale(1.05); }

  /* شماره و بج با جای ثابت */
  .num {
    position: absolute; left: 14px; top: 12px;
    font-weight: 800; font-size: 13px; color: $muted; opacity: .8;
  }
  .badge {
    position: absolute; right: 14px; top: 12px;
    font-size: 12px; color: $primary; font-weight: 700;
    padding: 4px 8px; border-radius: 999px;
    background: rgba($primary,.10); border: 1px solid rgba($primary,.35);
  }

  /* آیکن داخل پِل */
  .icon {
    display: inline-grid; place-items: center;
    width: 46px; height: 46px; border-radius: 12px;
    background: rgba($primary,.12);
    font-size: 22px; margin-bottom: 8px;
    transition: transform .2s ease;
  }
}

/* کارت‌ها با شکل/رفتار متفاوت */
.cardA {
  @media (min-width: 992px) { grid-area: A; }
  /* برش زاویه‌ای پایین */
  clip-path: polygon(0 0,100% 0,100% 86%, 88% 100%, 0 100%);
}

.cardB { @media (min-width: 992px) { grid-area: B; } }

.cardC {
  @media (min-width: 992px) { grid-area: C; }
  background:
    linear-gradient(135deg, rgba($primary,.08), transparent 60%),
    $bg;
  border: 1px solid mix($border,$primary,70%);
}

/* کارت افقی – متعادل شده */
.cardD {
  @media (min-width: 992px) { grid-area: D; }
  display: flex; flex-direction: column; align-items: center; text-align: center;

  .icon { margin-bottom: 8px; }
}
.cardA , .cardB , .cardC , .cardD
{
    display: flex; flex-direction: column; align-items: center; text-align: center;
}

/* ارتفاع حداقلی در موبایل برای ثبات */
@media (max-width: 991px) {
  .card { min-height: 160px; }
}

/* نوار ارزش‌ها */
.valueStrip {
  margin-top: 18px;
  display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;
}

.pill {
  padding: 8px 12px; border-radius: 999px;
  border: 1px dashed mix($border,$primary,60%);
  background: rgba($primary,.06);
  color: $text; font-size: 13px; white-space: nowrap;
}
